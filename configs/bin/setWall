#!/bin/bash

# "bash strict mode"
set -uo pipefail

if [ $# -eq 0 ]; then
    echo "setWall: specify a wallpaper"
    exit 1
else
    if [ -f "$1" ]; then
        if file "$1" | /bin/grep "image" >> /dev/null; then
            TO_SET=$(readlink -f "$1")
            ln -sf "$TO_SET" /home/$USER/.wallpaper
            killall -q swaybg -9
            swaybg -m fill -i /home/$USER/.wallpaper &
            exit 0
        fi
    fi
fi

echo "setWall: $1 is invalid"
exit 1
